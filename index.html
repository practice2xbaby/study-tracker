<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Time Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        input, button { margin: 5px; padding: 8px; font-size: 16px; }
        canvas { max-width: 600px; margin: 20px auto; display: block; }
    </style>
</head>
<body>

    <h2>Study Time Tracker</h2>

    <label for="date">Date:</label>
    <input type="date" id="date">
    
    <label for="minutes">Minutes:</label>
    <input type="number" id="minutes" placeholder="Enter minutes">

    <button onclick="addOrUpdateData()">Add/Update Data</button>
    <button onclick="clearData()" style="background: red; color: white;">Clear Data</button>

    <canvas id="studyChart"></canvas>

    <script>
        const ctx = document.getElementById('studyChart').getContext('2d');

        // Load saved data from LocalStorage
        let studyData = JSON.parse(localStorage.getItem('studyData')) || { labels: [], data: [] };

        // Create the chart
        const studyChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: studyData.labels,
                datasets: [{
                    label: 'Minutes Spent Studying',
                    data: studyData.data,
                    backgroundColor: 'rgba(255, 182, 193, 0.6)',  // Baby pink with transparency
                    borderColor: 'rgba(255, 182, 193, 1)',       // Solid baby pink border
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        function addOrUpdateData() {
            const dateInput = document.getElementById('date').value;
            const minutes = document.getElementById('minutes').value;

            if (!dateInput || !minutes) {
                alert("Please enter both date and minutes!");
                return;
            }

            // Convert YYYY-MM-DD to MM-DD-YYYY
            const dateObj = new Date(dateInput);
            const formattedDate = `${String(dateObj.getMonth() + 1).padStart(2, '0')}-${String(dateObj.getDate()).padStart(2, '0')}-${dateObj.getFullYear()}`;

            const existingIndex = studyData.labels.indexOf(formattedDate);

            if (existingIndex !== -1) {
                // Update existing data
                studyData.data[existingIndex] = Number(minutes);
            } else {
                // Add new data
                studyData.labels.push(formattedDate);
                studyData.data.push(Number(minutes));
            }

            localStorage.setItem('studyData', JSON.stringify(studyData)); // Save to LocalStorage

            studyChart.data.labels = studyData.labels;
            studyChart.data.datasets[0].data = studyData.data;
            studyChart.update();

            // Clear input fields
            document.getElementById('date').value = '';
            document.getElementById('minutes').value = '';
        }

        function clearData() {
            if (confirm("Are you sure you want to clear all data?")) {
                localStorage.removeItem('studyData'); // Clear LocalStorage
                studyData = { labels: [], data: [] }; // Reset data
                studyChart.data.labels = [];
                studyChart.data.datasets[0].data = [];
                studyChart.update();
            }
        }
    </script>

</body>
</html>
